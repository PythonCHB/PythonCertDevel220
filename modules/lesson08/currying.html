

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Currying &mdash; PythonCert220 2.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Itertools" href="itertools.html" />
    <link rel="prev" title="Closures" href="closures.html" /> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> PythonCert220
          

          
          </a>

          
            
            
              <div class="version">
                2.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Lesson content</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#py220-advanced-python-programming">Py220: Advanced Python Programming</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../lesson00/index.html">Welcome!</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lesson01/index.html">Lesson 1 : Automated Testing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lesson02/index.html">Lesson 2 : Logging &amp; Debuging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lesson03/index.html">Lesson 3 : Relational databases</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lesson04/index.html">Lesson 4 : Iteration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lesson05/index.html">Lesson 5 : Consuming APIs with NoSQL</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lesson06/index.html">Lesson 6 : Profiling and performance</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lesson07/index.html">Lesson 7 : Currency and async</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">Lesson 8 : Functional Techniques</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="closures.html">Closures</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Currying</a></li>
<li class="toctree-l4"><a class="reference internal" href="itertools.html">Itertools</a></li>
<li class="toctree-l4"><a class="reference internal" href="assignment.html">Assignment</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../lesson09/index.html">Lesson 9 : Advanced Python language constructs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lesson10/index.html">Lesson 10 : Metaprogramming</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">PythonCert220</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Lesson content</a> &raquo;</li>
        
          <li><a href="index.html">Lesson 8 : Functional Techniques</a> &raquo;</li>
        
      <li>Currying</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/modules/lesson08/currying.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="currying">
<h1>Currying<a class="headerlink" href="#currying" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="https://rriehle.github.io/FP3/build/html/index.html#currying">https://rriehle.github.io/FP3/build/html/index.html#currying</a></p>
<div id="currying" class="section"><p class="rubric" id="id1">Currying` &lt;<a class="reference external" href="https://rriehle.github.io/FP3/build/html/index.html#currying">https://rriehle.github.io/FP3/build/html/index.html#currying</a>&gt;`__</p>
<p>“Currying” is a special case of closures:</p>
<p>The idea behind currying is that you may have a function with a number
of parameters, and you want to make a specialized version of that
function with a couple parameters pre-set.</p>
<p>Let’s go back to the multiplier example we used when learning closures:</p>
<p><a href="#id2"><span class="problematic" id="id3">``</span></a><a href="#id4"><span class="problematic" id="id5">`</span></a></p>
<blockquote>
<div><dl class="docutils">
<dt>def multiplier(x):</dt>
<dd>return x * 3</dd>
</dl>
</div></blockquote>
<p><a href="#id6"><span class="problematic" id="id7">``</span></a><a href="#id8"><span class="problematic" id="id9">`</span></a></p>
<p>As before, we can use closures to create a multiplier factory, one that
requires very little code to create new multipliers that do not
necessarily return x times 3 all the time. Another option, if you don’t
feel like using closures, would be to modify the&nbsp;<em>multiplier</em> function
to take a second parameter:</p>
<p><a href="#id10"><span class="problematic" id="id11">``</span></a><a href="#id12"><span class="problematic" id="id13">`</span></a></p>
<blockquote>
<div><dl class="docutils">
<dt>def multiplier(x, n=3):</dt>
<dd>return x * n</dd>
</dl>
</div></blockquote>
<p><a href="#id14"><span class="problematic" id="id15">``</span></a><a href="#id16"><span class="problematic" id="id17">`</span></a></p>
<p>This one would still be able to work in exactly the same way as the
original function, but now it also allows you to override the default
multiplication by 3 with a different factor:</p>
<p><a href="#id18"><span class="problematic" id="id19">``</span></a><a href="#id20"><span class="problematic" id="id21">`</span></a></p>
<blockquote>
<div>multiplier(4) # The result will be 4 * 3 = 12
multiplier(4, 2) # The result will be 4 * 2 = 8 since the default was overridden</div></blockquote>
<p><a href="#id22"><span class="problematic" id="id23">``</span></a><a href="#id24"><span class="problematic" id="id25">`</span></a></p>
<p>Still a bit clunky – it forces us to keep passing the value of the
factor, even&nbsp;if it’s not&nbsp;changing (unless the factor happens to have the
default value of 3). And there are places, like&nbsp;map&nbsp;that require a
function that takes only one argument!</p>
<div class="section docutils container" id="real-world-example">
<p>What if I could create a function, on the fly, that had a
particular&nbsp;factor “baked in”?</p>
<p><em>Enter Currying</em>&nbsp;– Currying is a technique where you reduce the
number of parameters&nbsp;a function takes, creating a specialized
function with one or more of the original parameters set to a
particular value. Here is that technique, applied to the multiplier
problem:</p>
</div>
<dl class="docutils">
<dt><a href="#id26"><span class="problematic" id="id27">``</span></a><a href="#id28"><span class="problematic" id="id29">`</span></a></dt>
<dd><dl class="first last docutils">
<dt>def get_multiplier(n = 3):</dt>
<dd><dl class="first docutils">
<dt>def multiplier(x)</dt>
<dd>return x * n</dd>
</dl>
<p class="last">return multiplier</p>
</dd>
</dl>
</dd>
</dl>
<p><a href="#id30"><span class="problematic" id="id31">``</span></a><a href="#id32"><span class="problematic" id="id33">`</span></a></p>
<blockquote>
<div>Now, in this case, we still had to define&nbsp;<em>multiplier</em> inside
of&nbsp;<em>get_multiplier</em>, which presented no major issues, but
could&nbsp;become more cumbersome in the next scenario. Imagine you have a
Python module called&nbsp;<em>introductions.py</em>. Inside of that module,
there is a single function called&nbsp;<em>introduce_person()</em>:</div></blockquote>
<p><a href="#id34"><span class="problematic" id="id35">``</span></a><a href="#id36"><span class="problematic" id="id37">`</span></a></p>
<blockquote>
<div><p># introductions.py
def introduce_person(name, age, job, location):</p>
<blockquote>
<div>return “This is %s, a %d-year-old %s living in %s” % (name, age, job, location)</div></blockquote>
</div></blockquote>
<p><a href="#id38"><span class="problematic" id="id39">``</span></a><a href="#id40"><span class="problematic" id="id41">`</span></a></p>
<blockquote>
<div>The <a href="#id42"><span class="problematic" id="id43">*</span></a>introduce_person&nbsp;<a href="#id44"><span class="problematic" id="id45">*</span></a>method allows you to create a basic string
to introduce a person. It takes four parameters.</div></blockquote>
<p><a href="#id46"><span class="problematic" id="id47">``</span></a><a href="#id48"><span class="problematic" id="id49">`</span></a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">introductions</span> <span class="k">import</span> <span class="n">introduce_person</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">introduce_person</span><span class="p">(</span><span class="s2">&quot;Elisa&quot;</span><span class="p">,</span> <span class="mi">28</span><span class="p">,</span> <span class="s2">&quot;engineer&quot;</span><span class="p">,</span> <span class="s2">&quot;Portland&quot;</span><span class="p">)</span>
<span class="go">&#39;This is Elisa, a 28-year-old engineer living in Portland&#39;</span>
</pre></div>
</div>
<p><a href="#id50"><span class="problematic" id="id51">``</span></a><a href="#id52"><span class="problematic" id="id53">`</span></a></p>
<blockquote>
<div><p>This works well, but it might seem less convenient if you have a list
of people you need to introduce, all with the same job (for example,
‘student’), all with the same age (maybe 4th grade children) who all
happen to be 10 years old and all living in the same city. Only the
names are changing.</p>
<p>To take advantage of&nbsp;the parameters these group of people have in
common, we could create a curried function, just like we did for the
multiplier:</p>
</div></blockquote>
<p><a href="#id54"><span class="problematic" id="id55">``</span></a><a href="#id56"><span class="problematic" id="id57">`</span></a></p>
<blockquote>
<div><dl class="docutils">
<dt>def get_simple_intro(age, job, location):</dt>
<dd><dl class="first docutils">
<dt>def simple_introduction(name):</dt>
<dd>return “This is %s, a %d-year-old %s living in %s” % (name, age, job, location)</dd>
</dl>
<p class="last">return simple_intro</p>
</dd>
</dl>
<p>&gt;&gt; simple_intro = get_simple_intro(10, ‘student’, ‘Seattle’)
&gt;&gt; simple_intro(‘Maya’)
‘This is Maya, a 10-year-old student living in Seattle’
&gt;&gt; simple_intro(‘Alison’)
‘This is Alison, a 10-year-old student living in Seattle’</p>
</div></blockquote>
<p><a href="#id58"><span class="problematic" id="id59">``</span></a><a href="#id60"><span class="problematic" id="id61">`</span></a></p>
<blockquote>
<div><p>There is, however, an easier way to achieve this.</p>
<p class="rubric" id="currying-with-functools-partial">Currying with <em>functools.partial</em></p>
</div></blockquote>
<div class="section docutils container" id="functools-partial">
<p>The&nbsp;functools&nbsp;module in the standard library provides utilities
for working with functions:</p>
<p><a class="reference external" href="https://docs.python.org/3.5/library/functools.html">https://docs.python.org/3.5/library/functools.htmlLinks to an
external
site.</a></p>
<p>Creating a curried function turns out to be common enough that
the&nbsp;functools.partial&nbsp;function provides an optimized way to do
it:</p>
<p>What functools.partial does is:</p>
<blockquote>
<div><ul class="simple">
<li>Makes a new version of a function with one or more arguments
already filled in.</li>
<li>The new version of a function documents itself.</li>
</ul>
</div></blockquote>
<p>Let’s go back one last time to the multiplier example:</p>
</div>
<p><a href="#id62"><span class="problematic" id="id63">``</span></a><a href="#id64"><span class="problematic" id="id65">`</span></a></p>
<blockquote>
<div><dl class="docutils">
<dt>def multiplier(x, n=3):</dt>
<dd>return x * n</dd>
</dl>
</div></blockquote>
<p><a href="#id66"><span class="problematic" id="id67">``</span></a><a href="#id68"><span class="problematic" id="id69">`</span></a></p>
<blockquote>
<div>We will now use functools.partial to create a curried version of the
multiplier function:</div></blockquote>
<p><a href="#id70"><span class="problematic" id="id71">``</span></a><a href="#id72"><span class="problematic" id="id73">`</span></a></p>
<blockquote>
<div><p>from functools import partial</p>
<dl class="docutils">
<dt>def multiplier(x, n=3):</dt>
<dd>return x * n</dd>
</dl>
<p>double_it = partial(multiplier, n=2)
quadruple_it = partial(multiplier, n=4)</p>
<p>&gt;&gt; double_it(4)
8
&gt;&gt; quadruple_it(4)
16</p>
</div></blockquote>
<p><a href="#id74"><span class="problematic" id="id75">``</span></a><a href="#id76"><span class="problematic" id="id77">`</span></a></p>
<blockquote>
<div><p><em>partial</em> returns a curried function in which one or more parameters
of the original function&nbsp;have been given values, so that the returned
function will not “ask” for those parameters. In the example
above,&nbsp;the&nbsp;<em>multiplier&nbsp;*method was defined right there and then,
but it still works if the method is being imported. Let’s see it
working with our *introductions</em> module:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">introductions</span> <span class="k">import</span> <span class="n">introduce_person</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">functools</span> <span class="k">import</span> <span class="n">partial</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">simple_intro</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="n">introduce_person</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">job</span><span class="o">=</span><span class="s1">&#39;student&#39;</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s1">&#39;Seattle&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">simple_intro</span><span class="p">(</span><span class="s1">&#39;Letty&#39;</span><span class="p">)</span>
<span class="go">&#39;This is Letty, a 10-year-old student living in Seattle&#39;</span>
</pre></div>
</div>
<p>Note that in this case, you don’t even need to see the code
for&nbsp;<em>introduce_person</em>, as <em>functools.partial</em> is taking care of
the process of currying it into a single-parameter function.</p>
</div></blockquote>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="itertools.html" class="btn btn-neutral float-right" title="Itertools" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="closures.html" class="btn btn-neutral" title="Closures" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, University of Washington, Christopher Barker, Luis Diego Conejo, Andy Miles, Rick Riehle, Joseph Schilz. Creative Commons Attribution-ShareAlike 3.0 license

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

  

  <script type="text/javascript" src="../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>