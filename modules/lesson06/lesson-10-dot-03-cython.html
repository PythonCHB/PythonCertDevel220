

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Lesson 10.03 Cython &mdash; PythonCert220 2.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> PythonCert220
          

          
          </a>

          
            
            
              <div class="version">
                2.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Exercise notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../exercises/index.html">Exercises</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../supplemental/index.html">Supporting materials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../references/index.html">External links</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">PythonCert220</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
      <li>Lesson 10.03 Cython</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/modules/lesson06/lesson-10-dot-03-cython.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="lesson-10-03-cython">
<h1>Lesson 10.03 Cython<a class="headerlink" href="#lesson-10-03-cython" title="Permalink to this headline">¶</a></h1>
<p>{{VIDEO HERE}} {{VIDEO HERE}}</p>
<p>Cython is Python’s bridge to C. In allows you to continue to work
largely in Python, albeit Python with a few extensions, and yet produce
fast, statically compiled libraries to link into your Python code.</p>
<p>Cython provides a keyword, cdef which provides access to C types such as
char, int, long, float, double, struct and enum. It also enables type
delectations for function or method return values. Take for instance the
following function declaration.</p>
<div class="highlight-python"><div class="highlight"><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cdef</span> <span class="n">double</span> <span class="n">great_circle</span><span class="p">(</span><span class="n">double</span> <span class="n">lon1</span><span class="p">,</span> <span class="n">double</span> <span class="n">lat1</span><span class="p">,</span> <span class="n">double</span> <span class="n">lon2</span><span class="p">,</span> <span class="n">double</span> <span class="n">lat2</span><span class="p">):</span>
    <span class="n">cdef</span> <span class="n">double</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">radius</span><span class="p">,</span> <span class="n">theta</span><span class="p">,</span> <span class="n">x</span>
</pre></div>
</div>
</div></div><p>The great_circle function above is defined specifying double as the
type of its return value. Each argument is declared to be of type
double, and a series of symbols which will be used later in the function
are all defined to be of type double. The cython compiler uses this
information to produce a statically compiled library which is called
from Python. Since this is no longer standard Python we no longer save
it in files with .py extensions, instead by convention we use .pyx.</p>
<p>Cython involves a different workflow, because it is a statically
compiled environment. Statically compiled programming environments,
including C and Cython, have separate compile, link and run steps. You
can’t simply type your code into an interpreter and get an immediate
result. Statically compiled programming environments also have tooling
to support the static build workflow. These tools include Python’s
distutils used by cython setup files and optionally Gnu Make used to
manage the build dependencies of projects large and small.</p>
<p>This is&nbsp;<code class="docutils literal notranslate"><span class="pre">great_circle_setup_v1.py</span></code>&nbsp;which is one of the cython
setup files for use with the Great Circle code.</p>
<div class="highlight-python"><div class="highlight"><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">distutils.core</span> <span class="k">import</span> <span class="n">setup</span>
<span class="kn">from</span> <span class="nn">Cython.Build</span> <span class="k">import</span> <span class="n">cythonize</span>

<span class="n">setup</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Great Circle v1&#39;</span><span class="p">,</span>
    <span class="n">ext_modules</span><span class="o">=</span><span class="n">cythonize</span><span class="p">(</span><span class="s2">&quot;great_circle_v1.pyx&quot;</span><span class="p">),</span>
<span class="p">)</span>
</pre></div>
</div>
</div></div><p>The setup file tells Python how to have Cython build a statically
compiled library to call from within Python.</p>
<div class="highlight-bash"><div class="highlight"><div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python great_circle_setup_v1.py build_ext --inplace
</pre></div>
</div>
</div></div><p>There are two main hurdles in learning to use Cython. The first involves
the extensions to the Python language which are for the most part
borrowed directly from C. Without familiarity with C it may not be clear
what these new language elements mean, or how or why they are used. The
second hurdle involves the build process associated with statically
compiled languages — i.e., the separate compile, link and run steps
which will feel foreign to someone coming strictly from an interpreted
language like Python. In both cases programmers familiar with C will
have an advantage over those without. As with any new worthwhile
programming strategy it will take an investment in time and effort to
learn this new tool.</p>
<p>The video links start to pull this information together. Arm yourself
with the sample code when you watch Part 2.</p>
<p><a class="reference external" href="https://github.com/rriehle/ProfilingPerformance/tree/master/source/solutions/cython">https://github.com/rriehle/ProfilingPerformance/tree/master/source/solutions/cython</a></p>
<p>{{VIDEO HERE}}</p>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, University of Washington, Christopher Barker, Luis Diego Conejo, Andy Miles, Rick Riehle, Joseph Schilz. Creative Commons Attribution-ShareAlike 3.0 license

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

  

  <script type="text/javascript" src="../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>