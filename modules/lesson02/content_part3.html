

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Part 3: The Print Statement You Can Add To &mdash; PythonCert220 2.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Part 4: The Print Statement You Can Send Somewhere Else" href="content_part4.html" />
    <link rel="prev" title="Part 2: The Print Statement You Can Hide" href="content_part2.html" /> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> PythonCert220
          

          
          </a>

          
            
            
              <div class="version">
                2.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Lesson content</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#py220-advanced-python-programming">Py220: Advanced Python Programming</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../lesson00/index.html">Welcome!</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lesson01/index.html">Lesson 1 : Automated Testing</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">Lesson 2 : Logging &amp; Debuging</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="content_part1.html">Part 1: Logging</a></li>
<li class="toctree-l4"><a class="reference internal" href="content_part2.html">Part 2: The Print Statement You Can Hide</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Part 3: The Print Statement You Can Add To</a></li>
<li class="toctree-l4"><a class="reference internal" href="content_part4.html">Part 4: The Print Statement You Can Send Somewhere Else</a></li>
<li class="toctree-l4"><a class="reference internal" href="activity.html">Activity</a></li>
<li class="toctree-l4"><a class="reference internal" href="assignment.html">Assignment</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../lesson03/index.html">Lesson 3 : Relational databases</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lesson04/index.html">Lesson 4 : Iteration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lesson05/index.html">Lesson 5 : Consuming APIs with NoSQL</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lesson06/index.html">Lesson 6 : Profiling and performance</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lesson07/index.html">Lesson 7 : Currency and async</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lesson08/index.html">Lesson 8 : Functional Techniques</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lesson09/index.html">Lesson 9 : Advanced Python language constructs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lesson10/index.html">Lesson 10 : Metaprogramming</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">PythonCert220</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Lesson content</a> &raquo;</li>
        
          <li><a href="index.html">Lesson 2 : Logging &amp; Debuging</a> &raquo;</li>
        
      <li>Part 3: The Print Statement You Can Add To</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/modules/lesson02/content_part3.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="part-3-the-print-statement-you-can-add-to">
<h1>Part 3: The Print Statement You Can Add To<a class="headerlink" href="#part-3-the-print-statement-you-can-add-to" title="Permalink to this headline">¶</a></h1>
<p>Sometimes, it’s not enough just to see the error, warning, or
information message that you would put into a print statement to debug
your code. Other information can be useful, such as:</p>
<ul class="simple">
<li>when the log message was generated;</li>
<li>what Python file the log message was generated in;</li>
<li>what line number the log message was generated on; or</li>
<li>the name of the function that the log message was generated in.</li>
</ul>
<p>It’s easy to see how knowing the file name, line number, and function
name that the log message was generated on can be useful: you might
create a lot of messages and it can be easy to lose track of where all
of your log statements are.</p>
<p>Why would you possibly want to know&nbsp;<em>when</em>&nbsp;a log message was
generated? One reason&nbsp;is that&nbsp;you might want to time how long it takes
for your code to get to a particular log message. But the real usefulness of
knowing&nbsp;<em>when</em>&nbsp;a log message was generated will come in the next
session: we’ll be saving log messages to files instead of printing them
at the console. When you open up a saved log file, you might not even
know&nbsp;<em>what day</em>&nbsp;the message was generated on unless you include a
timestamp!</p>
<p>Let’s try it out! Make the following changes to your code:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">logging</span>

<span class="n">log_format</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%(asctime)s</span><span class="s2"> </span><span class="si">%(filename)s</span><span class="s2">:</span><span class="si">%(lineno)-4d</span><span class="s2"> </span><span class="si">%(levelname)s</span><span class="s2"> </span><span class="si">%(message)s</span><span class="s2">&quot;</span>  <span class="c1"># Add/modify these</span>
<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">WARNING</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="n">log_format</span><span class="p">)</span>                   <span class="c1"># two lines</span>

<span class="k">def</span> <span class="nf">my_fun</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">50</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;The value of i is 50.&quot;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="mi">100</span> <span class="o">/</span> <span class="p">(</span><span class="mi">50</span> <span class="o">-</span> <span class="n">i</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ZeroDivisionError</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Tried to divide by zero. Var i was </span><span class="si">{}</span><span class="s2">. Recovered gracefully.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">my_fun</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
</pre></div>
</div>
<p>Let’s look at these two lines:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">log_format</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%(asctime)s</span><span class="s2"> </span><span class="si">%(filename)s</span><span class="s2">:</span><span class="si">%(lineno)-4d</span><span class="s2"> </span><span class="si">%(levelname)s</span><span class="s2"> </span><span class="si">%(message)s</span><span class="s2">&quot;</span>
<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">WARNING</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="n">log_format</span><span class="p">)</span>
</pre></div>
</div>
<p>We begin by defining a <em>log_format</em>&nbsp;for our log messages. All of the
characters inside of the parentheses specify a different piece of
information that we want to include inside of our messages.&nbsp;Please see
the <a class="reference external" href="https://docs.python.org/3/library/logging.html#logrecord-attributes">full list of these LogRecord
attributes</a>,
and look for each of the attributes we included above, to get a guess
for what information this formatter will include. For
example,&nbsp;<em>asctime</em>&nbsp;produces a human-readable time string.</p>
<p>The formatting characters to the left and right of the parentheses are
borrowed from&nbsp;<em>printf</em>&nbsp;formatting. For example,&nbsp;<em>%(asctime)s</em>&nbsp;means
to include the time string in the log message as a string.
The&nbsp;<em>-4d</em>&nbsp;in&nbsp;<em>%(lineno)-4d</em>&nbsp;means to include the line number of the
log statement as a 4 character integer, padding the output on the right
with spaces.</p>
<p>Now, what do you imagine running simple.py will produce? Here is the
output:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span>$ python simple.py
2018-03-12 17:39:17,567 simple.py:10   WARNING The value of i is 50.
2018-03-12 17:39:17,567 simple.py:14   ERROR Tried to divide by zero. Var i was 50. Recovered gracefully.
</pre></div>
</div>
<p>As expected, we see the time that the log message was produced, the file
name and line number that the message was produced on, and the log
message and its level.</p>
<p>If we were using print statements to debug our code, then we could have
included this information manually in each print statement. But it’s
much less work to specify this format in one line at the top of our
code, and if we want to change it later then we only have to change it
in one location in our script.</p>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="content_part4.html" class="btn btn-neutral float-right" title="Part 4: The Print Statement You Can Send Somewhere Else" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="content_part2.html" class="btn btn-neutral" title="Part 2: The Print Statement You Can Hide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, University of Washington, Christopher Barker, Luis Diego Conejo, Andy Miles, Rick Riehle, Joseph Schilz. Creative Commons Attribution-ShareAlike 3.0 license

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

  

  <script type="text/javascript" src="../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>